<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS Playbooks - Ziyaadm</title>
    <!-- Google Fonts: Inter and Poppins for a modern look -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for modern design */
        body {
            font-family: 'Inter', sans-serif;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .dark body {
            background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
        }

        /* Light Mode Colors */
        .light {
            --bg-primary: #f8fafc;
            --bg-secondary: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --accent-primary: #3b82f6;
            --accent-secondary: #1d4ed8;
            --border-color: #e2e8f0;
            --shadow-color: rgba(0, 0, 0, 0.1);
        }

        /* Dark Mode Colors */
        .dark {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --accent-primary: #60a5fa;
            --accent-secondary: #3b82f6;
            --border-color: #334155;
            --shadow-color: rgba(0, 0, 0, 0.3);
        }

        /* Apply theme colors */
        .light body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .dark body { background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); }
        
        .bg-card { background-color: var(--bg-secondary); }
        .text-primary { color: var(--text-primary); }
        .text-secondary { color: var(--text-secondary); }
        .bg-button { background-color: var(--accent-primary); }
        .hover\:bg-button-dark:hover { background-color: var(--accent-secondary); }

        /* Enhanced card design */
        .card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #06b6d4);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }
        
        .card:hover::before {
            transform: scaleX(1);
        }
        
        .card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 25px 50px -12px var(--shadow-color);
            border-color: var(--accent-primary);
        }

        /* Glass morphism effect for header */
        .glass-header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 24px;
        }
        
        .dark .glass-header {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Enhanced search bar */
        .search-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 8px;
        }
        
        .dark .search-container {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Loading animation */
        .loading-spinner {
            border: 3px solid rgba(59, 130, 246, 0.1);
            border-left-color: #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Pulse animation for cards */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--accent-primary);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-secondary);
        }

        /* Focus styles */
        *:focus {
            outline: 2px solid var(--accent-primary);
            outline-offset: 2px;
            border-radius: 8px;
        }

        /* Text gradient for main title */
        .text-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .dark .text-gradient {
            background: linear-gradient(135deg, #60a5fa 0%, #a855f7 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Floating animation for theme toggle */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
        }
        
        .float-animation {
            animation: float 3s ease-in-out infinite;
        }
    </style>
</head>
<body class="min-h-screen">

    <!-- Background Pattern -->
    <div class="fixed inset-0 opacity-10">
        <div class="absolute inset-0" style="background-image: radial-gradient(circle at 25% 25%, #3b82f6 0%, transparent 50%), radial-gradient(circle at 75% 75%, #8b5cf6 0%, transparent 50%);"></div>
    </div>

    <!-- Main Container -->
    <div class="relative z-10 min-h-screen flex flex-col items-center py-8 px-4 sm:px-6 lg:px-8">
        
        <!-- Header Section -->
        <header class="w-full max-w-5xl text-center mb-16">
            <!-- Theme Toggle Button -->
            <button id="theme-toggle" 
                    class="float-animation fixed top-6 right-6 p-4 rounded-full bg-white/20 backdrop-blur-md border border-white/30 
                           hover:bg-white/30 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 z-50"
                    aria-label="Toggle dark mode">
                <svg id="moon-icon" class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                </svg>
                <svg id="sun-icon" class="w-6 h-6 text-white hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h1M3 12H2m15.354 5.354l-.707.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                </svg>
            </button>

            <!-- Main Title Container -->
            <div class="glass-header p-8 mb-6 transform hover:scale-105 transition-transform duration-300 ease-in-out">
                <div class="flex items-center justify-center mb-4">
                    <svg class="w-12 h-12 text-white mr-4" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                    <h1 class="text-5xl sm:text-6xl lg:text-7xl font-bold text-white leading-tight">
                        AWS Playbooks
                    </h1>
                </div>
                <p class="text-xl text-white/90 font-light">Your comprehensive guide to AWS support solutions</p>
            </div>
        </header>

        <!-- Search Bar -->
        <div class="w-full max-w-3xl mb-12">
            <div class="search-container">
                <div class="relative">
                    <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-white/70" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                    <input type="text" id="search-input" placeholder="Search playbooks by title..."
                           class="w-full pl-12 pr-4 py-4 bg-transparent text-white placeholder-white/70 
                                  focus:outline-none focus:ring-0 border-0 text-lg">
                </div>
            </div>
        </div>

        <!-- Grid container for playbook cards -->
        <div id="playbook-cards-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 w-full max-w-7xl">
            <!-- Initial Loading Spinner -->
            <div class="col-span-full text-center py-16 flex flex-col items-center justify-center">
                <div class="loading-spinner mb-6"></div>
                <p class="text-white/80 text-lg font-medium">Loading your playbooks...</p>
            </div>
        </div>

        <!-- Footer section -->
        <footer class="mt-20 text-center text-white/60 text-sm">
            <p>&copy; 2024 Ziyaadm. All rights reserved.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('playbook-cards-container');
            const searchInput = document.getElementById('search-input');
            const themeToggleBtn = document.getElementById('theme-toggle');
            const moonIcon = document.getElementById('moon-icon');
            const sunIcon = document.getElementById('sun-icon');
            const jsonFile = 'playbooks.json';
            let allPlaybooks = [];

            // --- Theme Toggle Logic ---
            const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');

            function applyTheme(theme) {
                if (theme === 'dark') {
                    document.documentElement.classList.add('dark');
                    document.documentElement.classList.remove('light');
                    moonIcon.classList.add('hidden');
                    sunIcon.classList.remove('hidden');
                } else {
                    document.documentElement.classList.remove('dark');
                    document.documentElement.classList.add('light');
                    moonIcon.classList.remove('hidden');
                    sunIcon.classList.add('hidden');
                }
            }

            // Set initial theme
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                applyTheme(savedTheme);
            } else if (prefersDarkScheme.matches) {
                applyTheme('dark');
            } else {
                applyTheme('light');
            }

            // Listen for system theme changes
            prefersDarkScheme.addEventListener('change', (e) => {
                if (!localStorage.getItem('theme')) {
                    applyTheme(e.matches ? 'dark' : 'light');
                }
            });

            themeToggleBtn.addEventListener('click', () => {
                const currentTheme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                localStorage.setItem('theme', newTheme);
                applyTheme(newTheme);
            });

            // --- Playbook Loading & Search Logic ---

            function renderPlaybookCards(playbooksToRender) {
                let cardsHtml = '';
                if (playbooksToRender.length === 0) {
                    cardsHtml = `
                        <div class="col-span-full text-center py-16">
                            <svg class="w-16 h-16 text-white/40 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.29-1.009-5.824-2.562M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                            <p class="text-white/60 text-lg">No playbooks found matching your search.</p>
                        </div>`;
                } else {
                    playbooksToRender.forEach((playbook, index) => {
                        const delay = index * 100;
                        cardsHtml += `
                        <div class="card p-6 flex flex-col justify-between h-full" style="animation-delay: ${delay}ms;">
                            <div class="flex-1">
                                <div class="flex items-start justify-between mb-4">
                                    <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center mr-3">
                                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                        </svg>
                                    </div>
                                    <div class="flex-1">
                                        <h2 class="text-xl font-semibold text-primary mb-2 leading-tight">${playbook.title}</h2>
                                        <p class="text-secondary text-sm leading-relaxed">Comprehensive guide for ${playbook.title} troubleshooting and resolution.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-6">
                                <a href="${playbook.url}" target="_blank" rel="noopener noreferrer" 
                                   class="w-full bg-button text-white font-medium py-3 px-6 rounded-lg text-center 
                                          hover:bg-button-dark focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 
                                          transition-all duration-300 transform hover:scale-105 flex items-center justify-center">
                                    <span>View Playbook</span>
                                    <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                                    </svg>
                                </a>
                            </div>
                        </div>
                        `;
                    });
                }
                container.innerHTML = cardsHtml;
            }

            async function fetchPlaybooks() {
                try {
                    const response = await fetch(jsonFile);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    allPlaybooks = await response.json();
                    renderPlaybookCards(allPlaybooks);
                } catch (error) {
                    console.error("Failed to load playbooks:", error);
                    container.innerHTML = `
                        <div class="col-span-full text-center py-16">
                            <svg class="w-16 h-16 text-red-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <p class="text-red-400 text-lg mb-2">Error loading playbooks</p>
                            <p class="text-white/60 text-sm">Please ensure 'playbooks.json' exists and check your configuration.</p>
                        </div>`;
                }
            }

            searchInput.addEventListener('input', () => {
                const searchTerm = searchInput.value.toLowerCase().trim();
                const filteredPlaybooks = allPlaybooks.filter(playbook => 
                    playbook.title.toLowerCase().includes(searchTerm)
                );
                renderPlaybookCards(filteredPlaybooks);
            });

            fetchPlaybooks();
        });
    </script>
</body>
</html>
